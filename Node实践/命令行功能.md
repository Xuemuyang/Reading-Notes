# 命令行功能

## 问题

- [x] 如何对外暴露命令行接口(通过命令行调用)
- 命令行工具如何读取参数

## 暴露命令行接口

通过 `package.json` 中的 `bin` 字段来指定 **命令的名称** 和 **可执行文件的位置**，如：

```js
// index.js
#! /usr/bin/env node

console.log('hello world')
```

```json
// package.json
{
  "name": "cli-test",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "bin": {
    "cli-test": "index.js"
  },
  "author": "",
  "license": "ISC"
}
```

可执行文件头部的 `#! /usr/bin/env node` 告诉了文件系统这个文件的解释器是 node。

`bin` 字段本质上是建立一个符号链接，省去了路径，直接通过命令执行脚本。

## 参考资料

- [用 Nodejs 开发命令行工具](https://juejin.im/post/59b73c9df265da06670c5868#npm-link%E5%91%BD%E4%BB%A4)
- [npm-package.json bin](https://docs.npmjs.com/files/package.json.html#bin)
