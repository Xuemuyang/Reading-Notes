# äº‹ä»¶æ´¾å‘ç›‘å¬

## é—®é¢˜

- [x] åˆ›å»ºå®ä¾‹
- [x] äº‹ä»¶ç›‘å¬ï¼Œæ³¨å†Œå›è°ƒ
- [x] äº‹ä»¶æ´¾å‘
- [x] ç§»é™¤ç›‘å¬äº‹ä»¶
- [x] äº‹ä»¶è§¦å‘ä¸€æ¬¡
- [x] é”™è¯¯å¤„ç†

## Events æ¨¡å—

æ‰€æœ‰èƒ½å¤Ÿç›‘å¬æ´¾å‘äº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ `EventEmitter` ç±»çš„å®ä¾‹ã€‚

### API

emitter æ˜¯å®ä¾‹æ–¹æ³•

- emitter.emit
- emitter.on åˆ«å emitter.addListener
- emitter.off åˆ«å emitter.removeListener
- emitter.once

### ğŸŒ°

`EventEmitter` å¯¹è±¡çš„äº‹ä»¶è§¦å‘å’Œç›‘å¬æ˜¯åŒæ­¥çš„ã€‚

```js
const EventEmitter = require('events');

class WithLog extends EventEmitter {
  execute(taskFunc) {
    console.log('Before executing');
    this.emit('begin');
    taskFunc();
    this.emit('end');
    console.log('After executing');
  }
}

const withLog = new WithLog();

withLog.on('begin', () => console.log('About to execute'));
withLog.on('end', () => console.log('Done with execute'));

withLog.execute(() => console.log('*** Executing task ***'));

// æ‰§è¡Œç»“æœ
Before executing
About to execute
*** Executing task ***
Done with execute
After executing
```

å½“æ²¡æœ‰ `error` äº‹ä»¶çš„å¤„ç†ç¨‹åºï¼Œä¸€ä¸ª `error` äº‹ä»¶è¢«æ´¾å‘ï¼Œé”™è¯¯ä¼šè¢«æŠ›å‡ºï¼ŒNode ç¨‹åºç»ˆæ­¢ï¼Œä½œä¸ºæœ€ä½³å®è·µï¼Œéœ€è¦ç»™ `error` å®è·µæ³¨å†Œä¸€ä¸ªå¤„ç†ç¨‹åºã€‚

```js
const myEmitter = new MyEmitter();
myEmitter.on('error', (err) => {
  console.error('whoops! there was an error');
});
myEmitter.emit('error', new Error('whoops!'));
// Prints: whoops! there was an error
```

## å‚è€ƒ

- [Events](https://nodejs.org/dist/latest-v12.x/docs/api/events.html)
- [Understanding Node.js Event-Driven Architecture](https://www.freecodecamp.org/news/understanding-node-js-event-driven-architecture-223292fcbc2d/)
